<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible">
    <title>Home</title>
    <#include "*/resources.html" />
</head>
<nav id="navbar" class="navbar navbar-default">
    <div id="nav-div" class="container-fluid">
        <div class="navbar-header">
            <a class="navbar-brand" href="javascript:" onclick="showPage('${root!}/index')">Basic Mvc Demo</a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                <li><a href="javascript:" onclick="showPage('${root!}/user/index?type=Manage')">Manage</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">${user.username!}<span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="javascript:">User Centre</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="javascript:" onclick="logout()">Logout</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>
<div style="height: 500px">
    <iframe id="ifr-content" class="embed-responsive-item" width="100%" height="90%" frameborder="0" scrolling="no" src="${root!}/index"></iframe>
</div>
</html>

<script type="text/javascript">
    function showPage(url) {
        $("#ifr-content").attr("src", url)
    }

    function logout() {
        $.ajax({
            type: "POST",
            url: "${root!}/user/logout",
            async: false,
            data: {},
            dataType: "json",
            success: function() {
                window.open("${root!}/", "_self")
            }
        })
    }
</script>