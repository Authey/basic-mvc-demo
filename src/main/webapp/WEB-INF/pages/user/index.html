<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>User</title>
</head>
<body>
    <div id="user-alert"></div>
    <table>
        <tr>
            <td><label for="username">Username:</label></td>
            <td colspan="4"><input type="text" id="username"></td>
        </tr>
        <tr>
            <td><label for="password">Password:</label></td>
            <td colspan="4"><input type="password" id="password"></td>
        </tr>
        <tr>
            <td><button onclick="query()">Load User</button></td>
            <td><button onclick="add()">Add User</button></td>
            <td><button onclick="remove()">Remove User</button></td>
            <td><button onclick="compare()">Compare User</button></td>
            <td><button onclick="toHome()">Jump to Home</button></td>
        </tr>
    </table>
    <div id="user-info"></div>
</body>
</html>

<#include "*/resources.html" />

<script type="text/javascript">
    function query() {
        $.ajax({
            type: "POST",
            url: "${root!}/user/query",
            async: false,
            data: {},
            dataType: "text",
            success: function(info) {
                $("#user-info").html(info)
            }
        })
    }

    function add() {
        let username = $("#username").val();
        let password = $("#password").val();
        $.ajax({
            type: "POST",
            url: "${root!}/user/add",
            async: false,
            data: {"username": username, "password": password},
            dataType: "text",
            success: function(msg) {
                $("#user-alert").html(msg)
            },
        })
    }

    function remove() {
        let username = $("#username").val();
        $.ajax({
            type: "POST",
            url: "${root!}/user/remove",
            async: false,
            data: {"username": username},
            dataType: "text",
            success: function(msg) {
                $("#user-alert").html(msg)
            }
        })
    }

    function compare() {
        let username = $("#username").val();
        let password = $("#password").val();
        $.ajax({
            type: "POST",
            url: "${root!}/user/compare",
            async: false,
            data: {"username": username, "password": password},
            dataType: "text",
            success: function(msg) {
                $("#user-alert").html(msg)
            }
        })
    }

    function toHome() {
        window.location.href = "${root!}/home"
    }
</script>